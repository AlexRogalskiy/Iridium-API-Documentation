<link rel="stylesheet" href="css/custom-styles.css">
<div class="container">
    <div class="inner">
        <div class="side-nav">
            <ul>
                <li>
                    <h5><a href="#advanced">Advanced</a></h5>
                </li>
                <li>
                    <small><a href="#initialization">Initialization Sequence</a></small>
                </li>
                <li>
                    <small><a href="#logging">Logging And STDIO</a></small>
                </li>
            </ul>
        </div>
        <div class="main-content" id="top">
            <div class="contents">
                <div class="title-container">
                    <h2 id="advanced">Advanced </h2>
                    <small class="go-to-top-button"><a href="#top"><i class="fas fa-arrow-up"></i></a></small>
                </div>
                <p>In the following sections, we will discuss several advanced topics about the Plugin system. If you
                    havn't, we strongly recommand reading through the Getting Started section for the basics.</p>
                <div class="title-container">
                    <h4 id="initialization">Initialization Sequence</h4>
                    <small class="go-to-top-button"><a href="#top"><i class="fas fa-arrow-up"></i></a></small>
                </div>
                <p>As you've already seen in Getting Started, Iridium will call your plugin to initialize and provide
                    the app context. Here we will examine the initialization process in detail.</p>
                <p>This diagram roughly outlines the starting sequence of a plugin:</p>
                <img class="screenshot" src="/img/init-sequence.png">
                <p>Several things to note here: </p>
                <ul>
                    <li>When Iridium calls <code>Initialize(iridium)</code> at 5., all the task list, label and progress
                        data are loaded from disk but cloud sync <b>MAY</b> be in progress. Your plugins should listen
                        to relevant cloud events to synchornize data correctly and not solely rely on
                        <code>Initialize</code>
                        for data gathering.</li>
                    <li>If the user did not log in to Iridium Cloud, 4. and 5. will not happen which means non of your
                        plugin code will run, including code inside and outside of <code>Initialize</code>.</li>
                </ul>
                <div class="title-container">
                    <h4 id="logging">Logging And STDIO</h4>
                    <small class="go-to-top-button"><a href="#top"><i class="fas fa-arrow-up"></i></a></small>
                </div>
                <p>During initialization of your plugin, Iridium will pass in <a
                        href="/?api#IridiumApp.Log"><code>Log</code></a> object as a logger. Your plugin can freely
                    utilize this object to log debug, info or error data. </p>
                <blockquote>Exercise caution when logging user's personal information, if use the logger to log personal
                    inforamtion such as email, name, please inform the user in your plugin's description</blockquote>
                <p>For example, you can log a debug entry like so:</p>
                <pre><code>module.exports.Initialize = (iridium) => {
    iridium.Log.Debug('My plugin is initialized');
}</code></pre>
                <p>You can also change your logger's log level to selectively omit certain levels of logs. The logger
                    will only log entries from the set level and up. The available levels are, from low to high:</p>
                <ul>
                    <li>debug</li>
                    <li>info</li>
                    <li>warn</li>
                    <li>error</li>
                </ul>
                <p>For example, setting the logger level to <code>warn</code> will disable all <code>debug</code> and
                    <code>info</code> logs:</p>
                <pre><code>module.exports.Initialize = (iridium) => {
    iridium.Log.SetLevel('warn')
    iridium.Log.Debug('This debug line is not logged');
    iridium.Log.Warn('This warning is logged');
}</code></pre>
                <p>Setting the level to <code>false</code> disables the logger</p>
                <blockquote>Setting the logger level is presistent, which means the level won't change unless you reset
                    it. The default level is 'debug' </blockquote>
                <p>The log file can be found at
                    <code>Your Home Directory/Iridium/plugins/Your Plugin Directory/log.txt</code></p>
                <p>Also, output produced by stdout and stderr will be redirected to
                    <code>Your Home Directory/Iridium/plugins/Your Plugin Directory/output.txt</code>.</p>
                <p>This means calling <code>console.log</code> in your plugin will print to this file. This makes
                    debugging and collecting crash data from your plugin easier as other libraries you import are likely
                    to use <code>console.log</code> or <code>console.error</code>.</p>
                <blockquote>Generally, calling <code>Log</code> for logging and debugging your plugin is preferred as
                    the <code>log.txt</code> file
                    size is limited at <b>10MB</b> while the size of <code>output.txt</code> is not limited.
                </blockquote>
            </div>
        </div>
    </div>
</div>